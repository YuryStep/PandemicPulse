# Pandemic Pulse
**Симулятор распространения вируса** 

## Стэк, Ограничения и Архитектура
Стэк: **Swift 5, UIKit** 
Минимальная версия: **iOS 15**   
Архитектура: **MVP+Coordinator**   

<table>
 <tr>
 <td align="center"><img src="https://i.imgur.com//uZxsJQ0.png" width="350"></td>
 <td align="center"><img src="https://i.imgur.com/Gkb33yv.png" width="350"></td>
 <td align="center"><img src="https://i.imgur.com/OQMWgwV.png" width="350"></td>
 <td align="center"><img src="https://i.imgur.com/R2WppRh.png" width="350"></td>
 </tr>
</table>

## Видео

https://github.com/YuryStep/PandemicPulse/assets/112872920/86bb745e-c2a2-4bc4-8a03-46b2c330c3ad

## Особенности проекта
* Проект написан на **`UIKit` без использования сторонних зависимостей**
* Для экранов использована архитектура **`MVP`**
* Управление **flow** и навигация выполняется за счет использования **Coordinator**
* Внедрение **(инъекция) зависимостей** в объектах выполнена через инициализаторы, а там, где это было невозможно - через property
* Верстка выполнена кодом с использованием **Constraints**
* Layout сверстан с использованием **`UICollectionView + CompositionalLayout + DiffableDataSource`**
* Работа с многопоточностью, с использованием **`GCD`**
* Для работы с данными создан **кастомный потокобезопасный двумерный массив**

## Особенности интерфейса
**Приложение состоит из 2 экранов:**  
﻿1. Экран ввода параметров.  
﻿﻿﻿2. Экран визуализации моделирования. 

* На 1 экране, **в случае ввода некорректных данных пользователю показывается Allert о необходимости проверить правильность ввода данных.**
* На 2 экране генерируется модель симуляции. **Размер элементов автоматически подбирается таким, чтобы заполнять весь экран независимо от размера устройства. При этом минимальный размер элемента не может опуститься ниже 44 пунктов (рекомендация Apple Human Interface Guidlines).**
* ﻿Экран 2 отображает всю моделируемую группу людей. Он поддерживает scroll (прокрутку), так как группа людей может быть достаточно большой и не помещаться на одном экране. 
* ﻿В начальном состоянии в группе нет инфицированных людей - все объекты отображаются как «здоровые».
* ﻿Если пользователь нажимает на «здоровый» элемент, тот становится «больным» и перерисовывается соответствующим образом. За время работы системы моделирования пользователь может нажимать на неограниченное количество «здоровых» элементов, тем самым «заражая» их. 
* С указанной на экране ввода параметров частотой Т пересчитывается количество «больных» элементов с последующим обновлением экрана.
* В верхней части экрана отображается счетчик инфицированных и здоровых элементов.

## Особенности реализации
* Для работы с табличными данными по аналогии с квадратной матрицей был создан кастомный потокобезопасный двумерный массив. **Потокобезопасность обеспечивается за счет GCD + Concurrent Queue.** Такой подход обеспечивает наибольшую скорость обработки, при условии невозможности использования Structured Cncurrency.   
  
* **Реализация пересчета модели:**   
Поскольку моделируемая группа может быть достаточно большой - вместо перебора всего двумерного массива - после "каждого цикла инфицирования" - точечно, по соответствующим индексам, **за O(1) обновляются только те элементы, которые были инфицированы.** При этом, после того, как у элемента не остается "здоровых соседей" (которых он потенциально может заразить) - он больше не учитывается при пересчете состояний.
